<section class="p-4 bg-gray-50">
  @let totalIncome = totalIncome$ | async;
  @let totalExpense = totalExpense$ | async;
  @let averageDailyExpenses = averageDailyExpenses$ | async;

  <header class="mb-6 flex justify-end">
    <h3 class="font-bold text-gray-800">
      Welcome, <span class="text-blue-600">{{authService.getUser().fullname}}</span>
    </h3>
  </header>

  <section class="mb-2" aria-labelledby="summary-title">
    <h2 id="summary-title" class="sr-only">Financial Summary</h2>

    <ul class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-2">

      @if(totalIncome){
      <li>
        <article class="analytics-card">
          <h4 class="text-gray-500 text-sm">Total Income</h4>
          <div class="flex justify-between items-center">
            <p class="text-xl font-semibold text-green-600">{{ totalIncome |currency:'USD':'symbol':'1.2-2' }}</p>
            <lucide-angular [img]="wallet" color="#16a34a" size="28"></lucide-angular>
          </div>
        </article>
      </li>
      }


      @if(totalExpense){
      <li>
        <article class="analytics-card">
          <h4 class="text-gray-500 text-sm">Total Expenses</h4>
          <div class="flex justify-between items-center">
            <p class="text-xl font-semibold text-red-600">{{ totalExpense | currency:'USD':'symbol':'1.2-2' }}</p>
            <lucide-angular [img]="receipt" color="#dc2626" size="28"></lucide-angular>
          </div>
        </article>
      </li>
      }


      @if(totalIncome && totalExpense){
      <li>
        <article class="analytics-card">
          <h4 class="text-gray-500 text-sm">Net Savings</h4>
          <div class="flex justify-between items-center">
            <p class="text-xl font-semibold text-blue-600">{{ (totalIncome - totalExpense) |
              currency:'USD':'symbol':'1.2-2' }}</p>
            <lucide-angular [img]="piggyBank" color="#2563eb" size="28"></lucide-angular>
          </div>
        </article>
      </li>
      }

      @if(averageDailyExpenses) {
      <li>
        <article class="analytics-card">
          <h4 class="text-gray-500 text-sm">Avg Daily Spend</h4>
          <div class="flex justify-between items-center">
            <p class="text-xl font-semibold text-yellow-600">{{ averageDailyExpenses | currency:'USD':'symbol':'1.2-2'
              }}</p>
            <lucide-angular [img]="activity" color="#ca8a04" size="28"></lucide-angular>
          </div>
        </article>
      </li>
      }




    </ul>
  </section>

  <section class="grid grid-cols-1 lg:grid-cols-2 gap-4">
    <!-- Section 1 -->

    @let formattedDataForCatChart = formattedDataForCatChart$ | async;


    @if(formattedDataForCatChart && pieChartVisibility()) {
    <div class="analytics-card visualization">
      <h4 class="text-gray-500 text-sm font-bold">Categorized Expenses</h4>
      <figure class="w-full aspect-[20/12] ">


        <div echarts [options]="formattedDataForCatChart" class="w-full h-full"></div>

      </figure>
    </div>
    }

    <!-- Section 2 -->
    <div class="analytics-card visualization">
      <h4 class="text-gray-500 text-sm font-bold">Monthly Expenses</h4>
      <figure class="w-full aspect-[20/12] min-h-[300px]">
        <div echarts [options]="lineChartOptions$()" class="w-full h-full"></div>
      </figure>
    </div>
  </section>





</section>