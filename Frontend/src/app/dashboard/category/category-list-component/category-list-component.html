<div class="p-4">
    <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-semibold text-gray-800">Categories</h2>

        <form class="flex items-center" [formGroup]="catForm" (ngSubmit)="handleAddCategory()">
            <label for="categoryName" class="sr-only">Category Name</label>
            <input id="categoryName" formControlName="name" type="text" class="input mr-2 "  placeholder="Category name" />
            <button type="submit" 
                class="bg-blue-500 text-white px-4 py-1 rounded hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400">
                Add
            </button>
        </form>
    </div>

    <div class="overflow-x-auto text-sm">
        <table class="min-w-full border border-gray-200 divide-y divide-gray-200 rounded-lg shadow-sm">
            <thead class="bg-gray-100">
                <tr>
                    @for (item of fields; track $index) {
                    <th scope="col" class="px-4 py-2 text-left text-sm font-medium text-gray-700">
                        {{ item.label }}
                    </th>
                    }

                    @if (actions.length > 0) {
                    <th scope="col" class="px-4 py-2 text-left text-sm font-medium text-gray-700">
                        Actions
                    </th>
                    }
                </tr>
            </thead>

            <tbody class="bg-white divide-y divide-gray-200">
                @for (cat of categories$ | async; track cat._id) {
                <tr>
                    @for (property of fields; track property.name) {
                    @let fieldName = property.name;
                    @if (property.type == 'date') {
                    <td class="px-4 py-2">{{ cat[fieldName] | date }}</td>
                    } @else {
                    <td class="px-4 py-2">{{ cat[fieldName] }}</td>
                    }
                    }

                    @for (action of actions; track action.name) {
                    <td class="px-4 py-2">
                        <button type="button"
                            class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-400"
                            (click)="action.function(cat._id)" [attr.aria-label]="action.label + ' for ' + cat.name">
                            {{ action.label }}
                        </button>
                    </td>
                    }
                </tr>
                }
            </tbody>
        </table>
    </div>
</div>